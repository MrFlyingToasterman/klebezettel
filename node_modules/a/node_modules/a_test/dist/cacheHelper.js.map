{"version":3,"sources":["../src/cacheHelper.js"],"names":[],"mappings":";;;;;QAKgB,K,GAAA,K;AALhB,IAAI,cAAJ;AACA,IAAI;AACA,YAAQ,QAAQ,QAAR,EAAkB,aAAlB,CAAgC,KAAxC;AACH,CAFD,CAEE,OAAO,CAAP,EAAU,CAAE;;AAEP,SAAS,KAAT,CAAe,GAAf,EAAoB;AACvB,sBAAkB,GAAlB;AACA;AACA;AACH;;AAED,SAAS,iBAAT,CAA2B,GAA3B,EAAgC;AAC5B,QAAI,YAAY,IAAI,QAAJ,CAAa,MAAb,GAAsB,CAAtC;AACA,QAAI,QAAJ,CAAa,MAAb,CAAoB,SAApB,EAA+B,CAA/B;AACH;;AAED,SAAS,iBAAT,GAA6B;AACzB,SAAK,IAAI,IAAT,IAAiB,QAAQ,KAAzB,EAAgC;AAC5B,YAAI,KAAK,KAAL,CAAW,SAAX,KAAyB,KAAK,KAAL,CAAW,OAAX,CAA7B,EACI;AACJ,eAAO,QAAQ,KAAR,CAAc,IAAd,CAAP;AACH;AACJ;;AAED,SAAS,eAAT,GAA2B;AACvB,QAAI,KAAJ,EAAW;AACP;AACH;AACJ","file":"cacheHelper.js","sourcesContent":["let reset;\ntry {\n    reset = require('a_mock').expectRequire.reset;\n} catch (e) {}\n\nexport function clear(mod) {\n    unloadLastChildOf(mod);\n    clearRequireCache();\n    clearAMockCache();\n}\n\nfunction unloadLastChildOf(mod) {\n    var lastIndex = mod.children.length - 1;\n    mod.children.splice(lastIndex, 1);\n}\n\nfunction clearRequireCache() {\n    for (var prop in require.cache) {\n        if (prop.match(/\\.node$/) || prop.match(/babel/))\n            continue;\n        delete require.cache[prop];\n    }\n}\n\nfunction clearAMockCache() {\n    if (reset) {\n        reset();\n    }\n}\n"]}